#Dev: DulyDuck
#Writers: Ps2turtle, Jeck, Jbe, Wilyape


rosande_1_missions = {
	slot = 1
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = Z35 }
	
	rosande_knightly_slave_hunters = { #Knightly Slave Hunters
		icon = mission_teutonic_lancer
		position = 4
		required_missions = { rosande_nobility_disgraced }

		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					fast_has_pop_of_race = { race = orcish }
					NOT = {
						num_of_units_in_province = {
							who = ROOT
							amount = 10
						}
					}
				}
				owner = { culture_group = orcish }
			}
		}

		trigger = {
			OR = {
				army_professionalism = 0.20
				army_tradition = 40
			}
			if = {
				limit = {
					calc_true_if = {
						all_known_country = {
							culture_group = orcish
							capital_scope = {
								OR = {
									region = west_castanor_region
									region = south_castanor_region
									region = inner_castanor_region
									area = cursewood_area
									area = whistlevale_area
								}
							}
						}		
						amount = 2
					}
				}
				calc_true_if = {
					all_known_country = {
						culture_group = orcish
						capital_scope = {
							OR = {
								region = west_castanor_region
								region = south_castanor_region
								region = inner_castanor_region
								area = cursewood_area
								area = whistlevale_area
							}
						}
						has_spy_network_from = {
							who = ROOT
							value = 50
						}
					}
					amount = 2
				}
			}
			estate_loyalty = {
				estate = estate_adventurers
				loyalty = 40
			}
			any_owned_province = {
				custom_trigger_tooltip = {
					tooltip = rosande_knightly_slavehunter.tt
					fast_has_pop_of_race = { race = orcish }
					num_of_units_in_province = {
						who = ROOT
						amount = 10
					}
				}
			}
		}

		effect = {
			random_owned_province = {
				limit = {
					fast_has_pop_of_race = { race = orcish }
					num_of_units_in_province = {
						who = ROOT
						amount = 10
					}
				}
				add_province_modifier = {
					name = Z35_orcish_workforce
					duration = -1
				}
				change_trade_goods = wine
			}
			large_decrease_of_orcish_tolerance_effect = yes
			custom_tooltip = rosande_slave_hunters.tt
		}
	}

	rosande_the_crimson_palace = { #The Crimson Palace
		icon = mission_magnificent_castle
		position = 6
		required_missions = { rosande_sour_taste}

		provinces_to_highlight = {
			OR = {
				AND = {
					area = baldostan_area
					NOT = { owned_by = ROOT }
				}
				AND = {
					province_id = 441
					NOT = {
						441 = {
							development = 20
							is_state = yes
							has_great_project = {
								type = bal_dostan
								tier = 1
							}
						}
					}
				}
			}
		}

		trigger = {
			baldostan_area = {
				type = all
				owned_by = ROOT
			}
			441 = {
				development = 20
				is_state = yes
				has_great_project = {
					type = bal_dostan
					tier = 1
				}
			}
		}
		effect = {
			441 = {
				add_permanent_province_modifier = {
				name = Z35_crimson_palace
				duration = -1
				}
			}
		}
	}

	rosande_overflowing_the_market = { #Overflowing the Market
		icon = bohemian_crystal
		position = 7
		required_missions = {
			rosande_the_crimson_palace
			rosande_no_orc_shall_leave
		}

		provinces_to_highlight = {
			OR = {
				province_id = 808 #Vernham
				province_id = 229 #Bal Mire
				province_id = 216 #Vertesk
				province_id = 451 #Nathalaire
				AND = {
					has_province_modifier = Z35_orcish_workforce
					NOT = {
						has_building = farm_estate
					}
				}
			}
		}
		
		trigger = {
			808 = {
				trade_share = {
					country = Z35
					share = 60
				}
			}
			229 = {
				trade_share = {
					country = Z35
					share = 30
				}
			}
			num_of_owned_provinces_with = {
				value = 8
				OR = {
					has_province_modifier = Z35_orcish_workforce
					has_province_modifier = Z35_grand_orcish_workforce
				}
				has_building = farm_estate
			}
			OR = {
				owns_or_non_sovereign_subject_of = 216
				216 = {
					owner = { 
						total_development = 200 
						OR = {
							has_spy_network_from = {
								who = ROOT
								value = 70
							}
							has_opinion = {
								who = ROOT
								value = 200
							}
						}
					}
				}
			}
			if = {
				limit = { subject_owns = 216 }
				216 = {
					owner = {
						NOT = { liberty_desire = 50 }
					}
				}
			}
			451 = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					owner = {
						trade_embargo_by = ROOT
					}
				}
			}
		}

		effect = {
			custom_tooltip = rosande_overflowing.tt
			hidden_effect = {
				every_owned_province = {
					limit = { trade_goods = slaves }
					change_trade_goods = wine
					add_province_modifier = {
						name = Z35_orcish_workforce
						duration = -1
					}
				}
			}
			for = {
				custom_tooltip = rosande_4_orc.tt
				amount = 4
				effect = "
				random_owned_province = {
					limit = {
						NOT = {
							has_orcish_minority_trigger = yes
							has_orcish_majority_trigger = yes
						}
					}
					add_orcish_minority_size_effect = yes
				}"
			}
			216 = { change_trade_goods = wine }
			set_bankruptcy = A74
			if = {
				limit = {
					NOT = {
						has_global_flag = age_of_wine_happened
					}
				}
				set_country_flag = rosande_age_wine
				country_event = {
					id = anb_price.7
				}
				set_global_flag = age_of_wine_happened
			}
			else = { add_dip_power = 100 }
			hidden_effect = {
				country_event = {
					id = flavor_rosande.24
					days = 180
				}
			}
		}
	}
}

rosande_1_2_missions = {
	slot = 1
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = {
		tag = Z35 
		has_country_flag = rosande_part_3
	}
	
	rosande_trees_entangled = { #Trees Entangled
		icon = mission_misty_forest
		position = 10
		required_missions = {
			rosande_hangover
		}

		provinces_to_highlight = {
			province_group = deepwoods_mountain_grove
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		trigger = {
			deepwoods_mountain_grove = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			num_of_generals = 5
			3020 = { #Ciranmyna
				province_has_current_tech_fort_trigger = yes
			}
		}
		

		effect = {
			country_event = {
				id = flavor_rosande.18
			}
		}
	}

	rosande_those_who_escaped = { #Those who Escaped
		icon = mission_alone_in_the_forest
		position = 12
		required_missions = {
			rosande_trees_entangled
		}

		provinces_to_highlight = {
			OR = {
				province_group = deepwoods_thorn_grove
				province_group = deepwoods_hunter_grove
				province_group = deepwoods_lake_grove
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			deepwoods_thorn_grove = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				custom_trigger_tooltip = {
					tooltip = rosande_those_who_escaped.tt
					area_for_scope_province = {
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			deepwoods_hunter_grove = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				custom_trigger_tooltip = {
					tooltip = rosande_those_who_escaped.tt
					area_for_scope_province = {
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			deepwoods_lake_grove = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				custom_trigger_tooltip = {
					tooltip = rosande_those_who_escaped.tt
					area_for_scope_province = {
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			3023 = { #Syryuniad
				trade_share = {
					country = ROOT
					share = 25
				}
			}
		}

		effect = {
			custom_tooltip = rosande_those_who_escaped.tt.1
			for = {
				amount = 3
				effect = "
				random_owned_province = {
					limit = {
						OR = {
							region = east_deepwoods_region
							region = west_deepwoods_region
						}
						has_orcish_majority_trigger = yes
					}
					change_culture = wood_elf
					remove_orcish_minority_size_effect = yes
				}"
			}
			for = {
				amount = 3
				effect = "
				random_owned_province = {
					limit = {
						OR = {
							region = west_castanor_region
							region = south_castanor_region
							region = inner_castanor_region
							area = cursewood_area
							area = whistlevale_area
						}
						NOT = {
							has_orcish_majority_trigger = yes
							has_orcish_minority_trigger = yes
						}
					}
					add_orcish_minority_size_effect = yes
				}"
			}
			custom_tooltip = rosande_those_who_escaped.tt.2
			set_country_flag = rosande_out_of_the_woods	
			west_deepwoods_region = {
				limit = { 
					fast_has_pop_of_race = { race = orcish } 
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_deepwoods_region = {
				limit = { 
					fast_has_pop_of_race = { race = orcish } 
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

rosande_2_missions = { 
	slot = 2
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = Z35 }

	rosande_nobility_disgraced = {
		icon = imperial_ascendancy
		position = 3
		required_missions = { rosande_rattling_chains}

		provinces_to_highlight = {
		}
		
		trigger = {
			stability = 1
			estate_influence = {
				estate = estate_nobles
				influence = 50
			}
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 50
			}	
			crown_land_share = 50
		}

		effect = {
			country_event = {
				id = flavor_rosande.3
			}
		}
	}

	rosande_grape_corvee = { #Grape Corvée
		icon = mission_pol_tend_east
		position = 4
		required_missions = { rosande_nobility_disgraced }

		provinces_to_highlight = {
		}

		trigger = {
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 60
			}
			employed_advisor = {
				category = ADM
			}
			employed_advisor = {
				category = DIP
			}
			employed_advisor = {
				category = MIL
			}
			is_in_deficit = no
		}

		effect = {
			set_country_flag = rosande_corvee_flag
			country_event = {
				id = flavor_rosande.33
			}
			add_legitimacy = 10
			custom_tooltip = rosande_grape_corvee.tt
		}
	}

	rosande_sour_taste = {
		icon = mission_among_the_great_powers
		position = 5
		required_missions = {
			rosande_knightly_slave_hunters
			rosande_grape_corvee
			rosande_silvermere_wine
		}

		provinces_to_highlight = {
			OR = {
				province_id = 216 #Vertesk
				province_id = 451 #Nathalaire
			}
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = rosande_magic_feast_tt
				OR = {
					has_country_modifier = magic_estate_magnificent_feast_3
					has_country_modifier = magic_estate_magnificent_feast_2
				}
			}
			treasury = 250
			custom_trigger_tooltip = {
				tooltip = rosande_unprofitable_trade.tt
				has_country_flag = rosande_unprofitable_trade
			}
			216 = { #Vertesk
				owner = {
					custom_trigger_tooltip = {
						tooltip = rosande_sour_taste_tt
						if = {
							limit = { NOT = { total_development = 200 } }
							has_25_opinion_sent_gift = { target = ROOT }
						}
						has_opinion_modifier = {
							who = ROOT
							modifier = improved_relation
							value = 100
						}
					}
				}
			}
			451 = { #Nathalaire
				owner = {
					custom_trigger_tooltip = {
						tooltip = rosande_sour_taste_tt
						if = {
							limit = { NOT = { total_development = 200 } }
							has_25_opinion_sent_gift = { target = ROOT }
						}
						has_opinion_modifier = {
							who = ROOT
							modifier = improved_relation
							value = 100
						}
					}
				}
			}
		}

		effect = {
			country_event = {
				id = flavor_rosande.5
			}
		}
	}

	rosande_no_orc_shall_leave = { #No orc shall leave
		icon = mission_orc_chillin
		position = 6
		required_missions = {
			rosande_sour_taste
			rosande_clearing_flank
		}
		provinces_to_highlight = {
            OR = {
				AND = {
					OR = {
						area = merescker_area
						area = upcreek_area
						area = verteben_area
						area = valefort_area
						area = taran_plains_area 
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT}
				}
				AND = {
					OR = {
						province_id = 764 #Upcreek
						province_id = 772 #Banwick
						province_id = 780 #Valefort
					}
					NOT = { province_has_current_tech_fort_trigger = yes }
				}
			}
		}
		
		trigger = {
			merescker_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			upcreek_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			verteben_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			valefort_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			taran_plains_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			764 = { #Upcreek
				province_has_current_tech_fort_trigger = yes
			}
			772 = { #Banwick
				province_has_current_tech_fort_trigger = yes
			}
			780 = { #Valefort
				province_has_current_tech_fort_trigger = yes
			}
		}

		effect = {
			774 = { #Taranton
				if = {
					limit = { NOT = { province_has_center_of_trade_of_level = 2 } }
					add_center_of_trade_level = 1
				}
				else = {
					ROOT = {
						add_treasury = 200
					}
				}
			}
			764 = { #Upcreek
				add_permanent_province_modifier = {
					name = Z35_ends_of_green_trade
					duration = -1
				}
			}
			772 = { #Banwick
				add_permanent_province_modifier = {
					name = Z35_ends_of_green_trade
					duration = -1
				}
			}
			780 = { #Valefort
				add_permanent_province_modifier = {
					name = Z35_ends_of_green_trade
					duration = -1
				}
			}
			custom_tooltip = rosande_balmire_athfork.tt
			hidden_effect = {
				729 = { #Athfork
					owner = {
						reverse_add_casus_belli = {
							target = ROOT
							type = cb_trade_conflict
							months = 240
						}
					}
				}
			}
			hidden_effect = {
				229 = { #Bal Mire
					owner = {
						reverse_add_casus_belli = {
							target = ROOT
							type = cb_trade_conflict
							months = 240
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_rosande.38
					days = 180
				}
			}
		}
	}

	rosande_knights_steed = { #A Knight's Steed
		icon = mission_protect_albania
		position = 7
		required_missions = {
			rosande_no_orc_shall_leave
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					region = west_castanor_region
					owned_by = ROOT
					NOT = {
						OR = {
							has_building = soldier_households
							base_manpower = 8
						}
					}
				}
				AND = {
					province_id = 777
					NOT = {
						has_building = state_house
					}
				}
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				region = west_castanor_region 
				OR = {
					has_building = soldier_households
					base_manpower = 8
				}
			}
			777 = { #Taranton
				has_building = state_house
			}
			OR = {
				num_of_cavalry	= 20
				cavalry_fraction = 0.2
			}
			OR = {
				AND  = {
					religion = regent_court 
					has_personal_deity = adean
				}
				AND = {
					religion = corinite
					custom_trigger_tooltip = {
						tooltip = rosande_knights_steed.tt
						num_of_owned_provinces_with = {
							value = 10
							region = west_castanor_region
							OR = {
								holy_order = begga_order
								holy_order = dame_order
								holy_order = esmaryal_order 
								holy_order = nerat_order
								holy_order = ara_order
								holy_order = minara_order
								holy_order = munas_order
								holy_order = ryala_order
								holy_order = balgar_order
								holy_order = corin_order
								holy_order = falah_order
								holy_order = nathalyne_order
							}
						}
					} 
				}
				religion = infernal_court
			}
			army_tradition = 50
		}

		effect = {
			custom_tooltip = rosande_knights_steed.tt.2
			hidden_effect = {
				every_owned_province = {
				limit = { area = taran_plains_area }
				add_base_production = 1
				add_base_manpower = 1
				}
			}
			add_country_modifier = {
				name = Z35_a_knights_steed
				duration = -1
			}
			custom_tooltip = rosande_knights_steed.tt.3
			hidden_effect = {
				if = {
					limit = { full_idea_group = aristocracy_ideas }
					add_country_modifier = {
						name = Z35_knights_rosande
						duration = -1
					}
				}
			}
		}
	}
}

rosande_2_2_missions = { 
	slot = 2
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = {
		tag = Z35 
		has_country_flag = rosande_part_3
	}

	rosande_unpaid_labour = { #Unpaid Labour
		icon = mission_forest_pilgrim	
		position = 11
		required_missions = {
			rosande_trees_entangled
			rosande_harsh_control
		}

		provinces_to_highlight = {
			OR = {
				region = east_deepwoods_region
				region = west_deepwoods_region
			}
			NOT = { 
				has_building = courthouse
			}
			owned_by = ROOT
		}

		trigger = {
			OR = {
				medium_tolerance_elven_race_trigger = yes
				high_tolerance_elven_race_trigger = yes
			}
			OR = {
				num_of_owned_provinces_with = {
					value = 10
					OR = {
						region = east_deepwoods_region
						region = west_deepwoods_region
					}
					has_building = courthouse
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 10
					OR = {
						region = east_deepwoods_region
						region = west_deepwoods_region
					}
					owner = {
						is_subject_of = ROOT
						culture = wood_elf
					}
				}
			}
			treasury = 1000
		}

		effect = {
			country_event = {
				id = flavor_rosande.19
			}
		}
	}

	rosande_city_of_flowers = { #City of Flowers
		icon = imperial_capitals
		position = 12
		required_missions = {
			rosande_unpaid_labour
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 827 #Ionntras
					NOT = {
						AND = {
							development = 30
							num_of_buildings_in_province = 6
							num_of_times_expanded_infrastructure = 2
						}
					}
				}
				area = humacvord_area
			}
			is_prosperous = no
		}

		trigger = {
			if = {
				limit = { NOT = { has_dlc = "Leviathan" } }
				827 = { #Ionntras
					development = 35
					num_of_buildings_in_province = 6
				}
			}
			else = {
				827 = { #Ionntras
					development = 30
					num_of_buildings_in_province = 6
					num_of_times_expanded_infrastructure = 3
				}
			}
			humacvord_area = { is_prosperous = yes }
			custom_trigger_tooltip = {
				tooltip = rosande_city_of_flowers.tt
			    has_country_flag = rosande_final_touches
			}
		}

		effect = {
			827 = { #Ionntras
				add_permanent_province_modifier = {
					name = Z35_city_of_flowers
					duration = -1
				}
				if = {
					limit = { 
						NOT = {
							has_building = mills
						}
					}
					add_building_construction = {
						building = mills
						speed = 1
						cost = 0
					}
				}
			}
			humacvord_area = {
				add_permanent_province_modifier = {
					name = Z35_gardens_heart
					duration = -1
				}
			}
			escerfork_area = {
				add_province_modifier = {
					name = Z35_gardens_heart
					duration = -1
				}
			}
		}
	}
}

rosande_3_missions = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = Z35 }

	rosande_knights_shady_pasts = {
		icon = mission_united_knight_order
		position = 1
		required_missions = {}

		provinces_to_highlight = {
		}

		trigger = {
			OR = {
				army_tradition = 30
				army_professionalism = 0.10
			}
			has_institution = renaissance
		}

		effect = {
			country_event = {
				id = flavor_rosande.2
			}
		}
	}

	rosande_rattling_chains = {
		icon = mission_serfdom
		position = 2
		required_missions = {
			rosande_knights_shady_pasts
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = oudeben_area
               	 		area = clovenwood_area
               	 		area = banesfork_area
						area = themin_area
					}
					NOT = { owned_by = ROOT }
				}
				AND = {
					area = blademarch_area 
					NOT = {
						AND = {
							has_production_building_trigger = yes
							base_production = 6
						}
					}
				}
			}
		}

		trigger = {
			oudeben_area = {
				type = all
				owned_by = ROOT
			}
			clovenwood_area = {
				type = all
				owned_by = ROOT
			}
			banesfork_area = {
				type = all
				owned_by = ROOT
			}
			themin_area = {
				type = all
				owned_by = ROOT
			}
			blademarch_area = {
				type = all
				owned_by = ROOT
			}
			any_owned_province = {
				area = blademarch_area
				has_production_building_trigger = yes
				base_production = 6
			}
			num_of_owned_provinces_with = {
				value = 2
				has_orcish_majority_trigger = yes
			}
			NOT = {
				has_country_modifier = racial_pop_orcish_purge
			}
		}

		effect = {
			custom_tooltip = rosande_rattling_chains.tt
			custom_tooltip = rosande_rattling_chains.tt.2 
			hidden_effect = {
				random_owned_province = {
					limit = {
						area = blademarch_area
						has_production_building_trigger = yes
						base_production = 6
					}
					change_trade_goods = wine
					add_province_modifier = {
						name = Z35_orcish_workforce
						duration = -1
					}
					add_orcish_minority_size_effect = yes
					add_orcish_minority_size_effect = yes
				}
			}
			largest_decrease_of_orcish_tolerance_effect = yes
		}
	}
			
	rosande_silvermere_wine = {	
		icon = mission_wine_monopolies
		position = 4
		required_missions = {
			rosande_knights_rosande
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = burnoll_area
						area = themin_area 
					}
					NOT = {
						AND = {
							owned_by = ROOT
							base_production = 6
							has_production_building_trigger = yes
						}
					}
				}
				AND = {
					area = humacvord_area 
					NOT = { owned_by = ROOT}
				}
			}
		}
		
		trigger = {
			humacvord_area = { 
				type = all
				owned_by = ROOT
			}
			burnoll_area = { 
				type = all
				owned_by = ROOT
				base_production = 6
				OR = {
					has_production_building_trigger = yes
					trade_goods = gold
				}
			}
			themin_area = {
				type = all
				owned_by = ROOT
				base_production = 6
				OR = {
					has_production_building_trigger = yes
					trade_goods = gold
				}
			}
			manpower = 15
		}

		effect = {
			burnoll_area = {
				add_province_modifier = {
					name = Z35_orcish_workforce
					duration = -1
				}
				if = {
					limit = { NOT = { trade_goods = gold } }
					change_trade_goods = wine
				}
				add_orcish_minority_size_effect = yes
				add_orcish_minority_size_effect = yes
				if = {
					limit =  { has_orcish_majority_trigger = yes }
					add_culture_construction = {
						speed = 0.5
						cost = 0
					}
					change_religion = ROOT
				}
			}
			themin_area = {
				add_province_modifier = {
					name = Z35_orcish_workforce
					duration = -1
				}
				if = {
					limit = { NOT = { trade_goods = gold } }
					change_trade_goods = wine
				}
				if = {
					limit = { has_orcish_majority_trigger = yes }
					add_culture_construction = {
						speed = 0.5
						cost = 0
					}
					change_religion = ROOT
					add_orcish_minority_size_effect = yes
					add_orcish_minority_size_effect = yes
				}
			}
			add_manpower = -15
			hidden_effect = {
				country_event = {
					id = flavor_rosande.6
					days = 365
				}
			}
		}
	}		

	rosande_clearing_flank = {	
		icon = mission_livonian_intervention
		position = 5
		required_missions = {
			rosande_knights_rosande
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = beastgrave_area
						area = dostans_way_area
						area = devaced_area
						area = oudmerewood_area
						area = catelsvord_area
						area = vernham_area
					}
					NOT = {
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				AND = {
					OR = {
						province_id = 812 #Beastgrave
						province_id = 808 #Vernham
					}
					NOT = { 
						num_of_units_in_province = {
							who = ROOT
							amount = 10
						}
					}
				}
			}
		}

		trigger = {
			beastgrave_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT  
			}
			dostans_way_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			vernham_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			catelsvord_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			oudmerewood_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			812 = { #Beastgrave
				num_of_units_in_province = {
					who = ROOT
					amount = 10
				}
			}
			808 = { #Vernham
				num_of_units_in_province = {
					who = ROOT
					amount = 10
				}
			}
		}

		effect = {
			beastgrave_area = {
				add_nationalism	= -5
			}
			dostans_way_area = {
				add_nationalism = -5
			}
			vernham_area = {
				add_nationalism = -5
			}
			catelsvord_area = {
				add_nationalism = -5
			}
			oudmerewood_area = {
				add_nationalism = -5
			}
			812 = { #Beastgrave
				add_province_modifier = {
					name = Z35_orcish_workforce
					duration = -1
				}
				add_orcish_minority_size_effect = yes
				add_orcish_minority_size_effect = yes
				change_trade_goods = wine
				add_devastation = 80
			}
			808 = { #Vernham
				add_province_modifier = {
					name = Z35_orcish_workforce
					duration = -1
				}
				add_orcish_minority_size_effect = yes
				add_orcish_minority_size_effect = yes
				change_trade_goods = wine
				add_devastation = 80
			}
			add_ruler_personality = careful_personality
		}
	}

	rosande_rid_the_ancient = {	
		icon = mission_fire_of_london
		position = 6
		required_missions = {
			rosande_clearing_flank
			rosande_dreams_of_grandeur
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = southgate_area
						area = oldhaven_area
						area = upper_nath_area
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					area = castonath_area 
					NOT = {
						AND = {
							num_of_units_in_province = {
								who = ROOT
								amount = 10
							}
							country_or_non_sovereign_subject_holds = ROOT
						}

					}
				}
			}
		}

		trigger = {
			southgate_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT  
			}
			oldhaven_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			upper_nath_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			castonath_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				num_of_units_in_province = {
					who = ROOT
					amount = 10
				}
			}
			mil_power = 150
			monthly_mil = 11
		}

		effect = {
			country_event = {
				id = flavor_rosande.12
			}
		}
	}

	rosande_grandest_winery = {	
		icon = austria_prospers
		position = 7
		required_missions = {
			rosande_rid_the_ancient
		}

		provinces_to_highlight = {
			province_id = 831 #South Castonath
		}

		trigger = {
			castonath_area = {
				type = all
				NOT = { devastation = 25 }
			}
			if = {
				limit = { NOT = { has_dlc = "Leviathan" } }
				831 = { #South Castonath
					AND = {
						development = 25
						has_manufactory_trigger = yes
						has_production_building_trigger = yes
					}
				}
			}
			else = {
				831 = { #South Castonath
					AND = {
						development = 25
						has_manufactory_trigger = yes
						has_production_building_trigger = yes
						num_of_times_expanded_infrastructure = 1
					}
				}
			}
			production_leader = { trade_goods = wine }
		}

		effect = {
			831 = {
				change_trade_goods = wine
				add_province_modifier = {
					name = Z35_grand_orcish_workforce
					duration = -1 
				}
				if = {
					limit = { NOT = { has_building = counting_house } }
					remove_building = workshop
					add_building_construction = {
						building = counting_house
						speed = 0
						cost = 0
					}
				}
			}
			custom_tooltip = rosande_grandest_winery.tt
			set_country_flag = castanor_unlock_grand_bazaar_early
			hidden_effect = {
				country_event = {
					id = flavor_rosande.23
					days = 180
				}
			}
		}
	}

	rosande_eternal_ball = {	
		icon = the_viennese_waltz
		position = 8
		required_missions = {
			rosande_overflowing_the_market
			rosande_knights_steed
			rosande_grandest_winery
			rosande_greatest_to_fall
		}

		provinces_to_highlight = {
			province_id = 441 #Arca Corvur
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = rosande_magic_feast_tt
				OR = {
					has_country_modifier = magic_estate_magnificent_feast_3
					has_country_modifier = magic_estate_magnificent_feast_2
				}
			}
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 60
			}
			diplomatic_reputation = 1
			441 = { #Arca Corvur
				num_of_buildings_in_province = 4
			}
		}

		effect = {
			country_event = {
				id = flavor_rosande.14
			}
		}
	}
}

rosande_3_2_1_missions = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { 
		tag = Z35
		has_country_flag = rosande_chapter_2
	}

	rosande_hangover = {	
		icon = feast_of_pheasants
		position = 9
		required_missions = {
			rosande_eternal_ball
		}

		provinces_to_highlight = {}

		trigger = {
			stability = 3
			army_size = 60
			estate_loyalty = {
				estate = all
				loyalty = 50
			}
			is_at_war = no
		}

		effect = {
			country_event = {
				id = flavor_rosande.15
			}
		}
	}
}

rosande_3_2_2_missions = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { 
		tag = Z35
		has_country_flag = rosande_part_3
	}

	rosande_harsh_control = {
		icon = mission_subjugate_the_merchants
		position = 10
		required_missions = {
			rosande_hangover
		}

		provinces_to_highlight = {
			has_province_modifier = Z35_orcish_workforce
			devastation = 15
			owned_by = ROOT		
		}

		trigger = {
			NOT = {
				any_owned_province = {
					has_province_modifier = Z35_orcish_workforce
					devastation = 15
				}
			}
			num_of_owned_provinces_with = {
				value = 30
				has_province_modifier = Z35_orcish_workforce 
			}
		}

		effect = {
			custom_tooltip = rosande_harsh_control.tt
			hidden_effect = {
				every_owned_province = {
					limit = { has_province_modifier = Z35_orcish_workforce }
					remove_province_modifier = Z35_orcish_workforce
					add_province_modifier = {
						name = Z35_grand_orcish_workforce
						duration = -1
					}
				}
			}
		}
	}

	rosande_wasted_potential = {
		icon = mission_empowerment
		position = 11
		required_missions = {
			rosande_harsh_control
		}

		provinces_to_highlight = {
			AND = {
				has_province_modifier = Z35_grand_orcish_workforce
				NOT = { has_building = mage_tower }
			}
		}

		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
			estate_influence = {
				estate = estate_mages
				influence = 40
			}
			num_of_owned_provinces_with = {
				value = 8
				has_province_modifier = Z35_grand_orcish_workforce
				has_building = mage_tower
			}
			has_estate_privilege = estate_mages_reduced_research_regulations
		}

		effect = {
			custom_tooltip = rosande_wasted_potential.tt
			set_country_flag = rosande_wasted_potential 
			add_estate_loyalty = {
				estate = estate_mages
				loyalty = 15
			}
			define_advisor = {
				type = court_mage
				skill = 3
				culture = ROOT
				religion = ROOT
			}
		}
	}

	rosande_crimson_crown = {
		icon = mission_apostolic_kingdom
		position = 12
		required_missions = {
			rosande_unpaid_labour
			rosande_wasted_potential
		}

		provinces_to_highlight = {
			OR = {
				province_id = 3020 #Ciranmyna
				owner = { culture_group = dwarven }
			}
		}

		trigger = {
			3020 = { #Ciranmyna
				base_production = 12
				has_great_project = {
					type = ciranmyna_the_shimmering_city
					tier = 2
				}
			}
			custom_trigger_tooltip = {
				tooltip = rosande_shimmering_gem.tt
				any_known_country = {
					culture_group = dwarven
					has_25_opinion_sent_gift = { target = ROOT }
					has_opinion_modifier	= {
						who = ROOT
						modifier = improved_relation
						value = 100
					}
				}
			}
			if = {
				limit = { has_dlc = "Common Sense" }
				court_mage = 5
			}
			else = { court_mage = 3 }
		}

		effect = {
			country_event = {
				id = flavor_rosande.21
			}
		}
	}

	rosande_ashen_bloom = {
		icon = mission_knight
		position = 13
		required_missions = {
			rosande_crimson_crown
			rosande_rise_above_flames
			rosande_those_who_escaped
			rosande_city_of_flowers
		}

		provinces_to_highlight = {
			OR = {
				region = west_deepwoods_region
				region = east_deepwoods_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			prestige = 90
			is_great_power = yes
			development_in_provinces = {
				value = 400
				region = south_castanor_region
			}
			OR = {
				has_had_golden_age = yes
				in_golden_age = yes
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 50
				OR = {
					region = west_deepwoods_region
					region = east_deepwoods_region
				}
			}
		}
		
		effect = {
			country_event = {
				id = flavor_rosande.22
			}
		}
	}
}

rosande_4_missions = { 
	slot = 4
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = Z35 }

	rosande_knights_rosande = {
		icon = mission_teutonic_riders
		position = 3
		required_missions = {
			rosande_rattling_chains
		}

		provinces_to_highlight = {}

		trigger = {
			num_of_cavalry = 8
			has_estate_privilege = estate_nobles_officer_corp 
			employed_advisor = { category = MIL }
			mil_power = 100
		}

		effect = {
			define_general = {
				shock = 4
				fire = 2
				manuever = 3
				siege = 0
			}
			add_country_modifier = {
				name = Z35_knights_rosande 
				duration = 7300
			}
			south_castanor_region = {
				add_permanent_claim = ROOT
			}
			esshyl_area = {
				add_permanent_claim = ROOT
			}
			add_mil_power = -100
		}
	}

	rosande_noble_fashion = {
		icon = friends_in_high_places
		position = 4
		required_missions = {
			rosande_knights_rosande
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = medirleigh_area
						area = swapstoke_area
						area = escerfork_area
					}
					NOT = { owned_by = ROOT}
				}
				AND = {
					province_id = 876 #Medirleigh
					NOT = { province_has_current_tech_fort_trigger = yes }
				}
				province_id = 880 #Esswyck
			}
		}

		trigger = {
			medirleigh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			swapstoke_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			escerfork_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			876 = {
				province_has_current_tech_fort_trigger = yes
			}
			treasury = 300
			880 = { #Esswyck
				trade_share	= {
					country = ROOT
					share = 40
				}
			}
		}

		effect = {
			medirleigh_area = {
				change_trade_goods = cloth
			}
			876 = { #Medirleigh
				add_building_construction = {
					building = textile
					speed = 1
					cost = 0
				}
			}
			add_treasury = -300
		}
	}

	rosande_dreams_of_grandeur = {
		icon = mission_expand_into_the_forest
		position = 5
		required_missions = {
			rosande_silvermere_wine
			rosande_noble_fashion
			rosande_the_crimson_forge
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = dryadsdale_area 
						area = hornwood_area 
						area = doewood_area 
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					province_id = 827 #Ionntras
					NOT = { has_building = courthouse }
				}
			}
		}

		trigger = {
			827 = {
				has_building = courthouse
			}
			stability = 2
			monthly_income = 40
			dryadsdale_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hornwood_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			doewood_area = {
				type = al
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			827 = {
				add_province_modifier = {
					name = Z35_a_beautiful_dream_1
					duration = -1
				}
				change_trade_goods = paper
			}
			set_capital = 827
			southgate_area = {
				add_permanent_claim = ROOT
			}
			oldhaven_area = {
				add_permanent_claim = ROOT
			}
			upper_nath_area = {
				add_permanent_claim = ROOT
			}
			castonath_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	
	rosande_griffon_lords = {
		icon = alpine_defenses
		position = 6
		required_missions = {
			rosande_dreams_of_grandeur
		}

		provinces_to_highlight = {
			province_id = 4097 #Marrhold
		}

		trigger = {
			NOT = {
				exists = B36
			}
			4097 = { #Marrhold
				OR = {
					AND = {
						development = 30
						has_building = courthouse
					}
					has_building = state_house
				}
			}
			accepted_culture = marrodic
		}

		effect = {
			country_event = {
				id = flavor_rosande.7
			}
		}
	}

	rosande_greatest_to_fall = {
		icon = mission_thinking_king
		position = 7
		required_missions = {
			rosande_rid_the_ancient
			rosande_griffon_lords
			rosande_eclipsing_old
		}

		provinces_to_highlight = {
			OR = {
				AND = {
					area = trialmount_area
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				province_id = 840
			}
		}

		trigger = {
			trialmount_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			840 = { #The North Citadel
				has_great_project = {
					type = the_north_citadel
					tier = 1
				}
			}
			legitimacy = 100
		}

		effect = {
			country_event = {
				id = flavor_rosande.13
			}
		}
	}
}

rosande_4_2_missions = { 
	slot = 4
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { 
		tag = Z35
		has_country_flag = rosande_part_3
	}

	rosande_half_breeds = {
		icon = mission_homeless_children
		position = 11
		required_missions = {
			rosande_harsh_control
		}

		provinces_to_highlight = {
			owned_by = ROOT
			has_half_orcish_minority_trigger = yes
			NOT = {
				AND = {
					has_manpower_building_trigger = yes
					development = 10
				}
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 6
				has_half_orcish_minority_trigger = yes
				has_manpower_building_trigger = yes
				development = 10
			}
			NOT = { unrest = -1 }
			adm_power = 200
		}

		effect = {
			add_adm_power = -200
			if = {
				limit = { has_country_flag = rosande_halforc_revolt }
				custom_tooltip = rosande_half_breeds.tt.1
				country_event = {
					id = flavor_rosande.17
				}
			}
			else = {
				custom_tooltip = rosande_half_breeds.tt.2
				country_event = {
					id = flavor_rosande.16
				}
			}
		}
	}

	rosande_rise_above_flames = {
		icon = mission_arise_ashes
		position = 12
		required_missions = {
			rosande_wasted_potential
			rosande_half_breeds
		}

		provinces_to_highlight = {
			AND = {
				owned_by = ROOT
				has_province_modifier = Z35_grand_orcish_workforce
				OR = {
					local_autonomy = 20
					NOT = { has_province_modifier = autonomy_decreased }
				}
			}
		}

		trigger = {
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
			has_mil_advisor_3 = yes
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 70
			}
			all_owned_province = {
				OR = {
					NOT = { has_province_modifier = Z35_grand_orcish_workforce }
					NOT = { local_autonomy = 20 }
					has_province_modifier = autonomy_decreased                   
				}
			}
			is_in_deficit = no
		}
		effect = {
			add_government_reform = rosande_blooming_nobility_reform
			custom_tooltip = rosande_above_flames.tt
			set_country_flag = rosande_above_the_flames
		}
	}
}

rosande_5_missions = { 
	slot = 5
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { 
		tag = Z35
	}

	rosande_the_crimson_forge = {
		icon = mission_smith
		position = 4
		required_missions = {
			rosande_knights_rosande
		}

		provinces_to_highlight = {
			province_id = 819 #Stewards Hold
		}

		trigger = {
			819 = { #Stewards Hold
				development = 20
				OR = {
					AND = {
						has_production_building_trigger = yes
						has_manufactory_trigger = yes
					}
					trade_goods = gold
				}
			}
			OR = {
				num_of_cavalry = 16
				cavalry_fraction = 0.40
			}
		}

		effect = {
			819= {
				add_permanent_province_modifier = {
					name = Z35_crimson_forge
					duration = -1
				}
				if = {
					limit = { NOT = { trade_goods = iron } }
					change_trade_goods = iron
				}
			}
			custom_tooltip = rosande_crimson_forge.tt
			if = {
				limit = {
					aristocracy_ideas = 1
				}
				remove_country_modifier = Z35_knights_rosande
				add_country_modifier = {
					name = Z35_knights_rosande
					duration = 7300
				}
			}
		}
	}

	rosande_eclipsing_old = {
		icon = mission_swear_fealty_knight
		position = 6
		required_missions = {
			rosande_dreams_of_grandeur
		}

		provinces_to_highlight = {
			province_id = 817
		}

		trigger = {
			817 = {
				province_has_current_tech_fort_trigger = yes
			}
			NOT = {
				exists = B33
			}
			OR = {
				power_projection = 70
				AND = {
					power_projection = 50
					prestige = 50
				}
			}
			has_global_modifier_value = {
				which = discipline
				value = 0.15
			}
		}

		effect = {
			country_event = {
				id = flavor_rosande.8
			}
			hidden_effect = {
				country_event = {
					id = flavor_rosande.9
				}
			}
		}
	}
}