namespace = gushuokguan_event

#An Alliance of Convenience
country_event = {
	id = gushuokguan_event.1
	title = gushuokguan_event.1.t
	desc = gushuokguan_event.1.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = { }
	
	option = {
		name = gushuokguan_event.1.a
		ai_chance = { factor = 1 }
		add_historical_friend = Y05 #Lanjinhui
		Y05 = { add_historical_friend = ROOT } #Lanjinhui #Gushuokguan
		add_country_modifier = {
			name = gushuokguan_alliance_of_yellow_and_blue
			duration = 3650
		}
	}
}

#The Fools of Lanjinhui
country_event = {
	id = gushuokguan_event.2
	title = gushuokguan_event.2.t
	desc = gushuokguan_event.2.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}
	
	option = {
		name = gushuokguan_event.2.a
		ai_chance = { factor = 1 }
		add_country_modifier = {
			name = gushoukguan_true_liberation_for_the_peasants
			duration = 3650
		}
	}
}

#The Stone Swords
country_event = {
	id = gushuokguan_event.3
	title = gushuokguan_event.3.t
	desc = gushuokguan_event.3.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}
	
	option = {
		name = gushuokguan_event.3.a
		ai_chance = { factor = 1 }
		add_army_tradition = 10
		add_country_modifier = {
			name = gushuokguan_drill_army_modifier
			duration = 5475
		}
	}
}

#The Stone Plot
country_event = {
	id = gushuokguan_event.4
	title = gushuokguan_event.4.t
	desc = gushuokguan_event.4.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}
	
	option = {
		name = gushuokguan_event.4.a
		ai_chance = { factor = 1 }
		vassalize = Y05
		random_list = {
			1 = {}
			1 = {
				Y05 = { #Lanjinhui
					capital_scope = {
						spawn_rebels = {
							type = leadered_peasant_rebels
							size = 2
						}
					}
				}
			}
		}
	}
}

#The Ciying Border Incident
country_event = {
	id = gushuokguan_event.5
	title = gushuokguan_event.5.t
	desc = gushuokguan_event.5.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.5.a
		ai_chance = { factor = 1 }
		random_list = {
			2 = { 
				vassalize = Y05 #Lanjinhui
				Y05 = { #Lanjinhui
					capital_scope = {
						spawn_rebels = {
							type = leadered_peasant_rebels
							size = 2
						}
					}
				}
			} 
			8 = {
				declare_war_with_cb = {
					who = Y05 #Lanjinhui
					casus_belli = cb_vassalize_mission
				}
			}
		}
	}
}

#The Triple Alliance
country_event = {
	id = gushuokguan_event.6
	title = gushuokguan_event.6.t
	desc = gushuokguan_event.6.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.6.a
		ai_chance = { factor = 1 }
		add_government_reform = the_stone_jun
	}
}

#The Confederation of Yanshen
country_event = {
	id = gushuokguan_event.7
	title = gushuokguan_event.7.t
	desc = gushuokguan_event.7.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.7.a
		ai_chance = { factor = 1 }
		if = {
			limit = { Y05 = { exists = no } } #Lanjinhui
			release = Y05 #Lanjinhui
		}
		create_subject = {
			subject_type = dao
			subject = Y05 #Lanjinhui
		}
		iongsim_area = {
			add_permanent_claim = ROOT #Gushuokguan
		}
		set_estate_privilege = estate_eunuchs_anb_confederal_administrative_cadre
		add_country_modifier = {
			name = gushuokguan_golden_dawn_for_the_dao
			duration = 3650
		}
		add_country_modifier = {
			name = gushuokguan_dao_normal_buff
			duration = -1
		}
	}
}

#Service Guarantees Citizenship
country_event = {
	id = gushuokguan_event.8
	title = gushuokguan_event.8.t
	desc = gushuokguan_event.8.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	after = {
		hidden_effect = {
			every_owned_province = {
				limit = {
					region = north_yanshen_region
					culture = jiangyang
				}
				set_seat_in_parliament = yes
			}
		}
	}

	option = {
		name = gushuokguan_event.8.a
		ai_chance = { factor = 1 }
		add_government_reform = gongmin_lianbang
		clear_adventurers_organization_effect = yes
		set_estate_privilege = estate_adventurers_organization_stone_army
	}
}

#Confederal Council
country_event = {
	id = gushuokguan_event.9
	title = gushuokguan_event.9.t
	desc = gushuokguan_event.9.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.9.a
		ai_chance = { factor = 1 }
		custom_tooltip = gushuokguan_enable_confederal_council_tt
		hidden_effect = {
			set_country_flag = gushuokguan_enable_confederal_council
		}
	}
}

#Migration Event Manager
country_event = {
	id = gushuokguan_event.10
	title = gushuokguan_event.51.t
	desc = gushuokguan_event.51.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes
	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		}
		has_country_flag = gushuokguan_enable_migration_events
	}

	hidden = yes

	option = {
		name = gushuokguan_event.51.a
		ai_chance = { factor = 1 }
		random_list = {
			#No empty
			1 = { country_event = { id = gushuokguan_event.11 } }
			1 = { country_event = { id = gushuokguan_event.12 } }
			1 = { country_event = { id = gushuokguan_event.13 } }
			1 = { country_event = { id = gushuokguan_event.14 } }
			1 = { country_event = { id = gushuokguan_event.15 } }
			1 = { country_event = { id = gushuokguan_event.16 } }
		}
	}
}

#Migrants come to X
country_event = {
	id = gushuokguan_event.11
	title = gushuokguan_event.11.t
	desc = gushuokguan_event.11.d
	picture = CHINESE_GENERAL_eventPicture
	
	
	is_triggered_only = yes

	trigger = { }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = gushuokguan_migration_target
			}
		}
	}
	
	option = {
		name = gushuokguan_event.11.a
		ai_chance = { factor = 1 }
		event_target:gushuokguan_migration_target = {
			add_random_development = 1
			random_list = {
				90 = {} #Empty
				10 = {
					random_list = {
						1 = {
							trigger = { has_harimari_majority_trigger = no }
							add_harimari_minority_size_effect = yes
						}
						1 = {
							trigger = { has_human_majority_trigger = no }
							add_human_minority_size_effect = yes
						}
						1 = {
							add_kobold_minority_size_effect = yes
						}
						1 = {
							add_elven_minority_size_effect = yes
						}
					}
				}
			}
		}
	}
}

#Migrant Clash in X
country_event = {
	id = gushuokguan_event.12
	title = gushuokguan_event.12.t
	desc = gushuokguan_event.12.d
	picture = CHINESE_GENERAL_eventPicture
	
	
	is_triggered_only = yes

	trigger = { }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = gushuokguan_migration_target
			}
		}
	}

	option = {
		name = gushuokguan_event.12.a
		ai_chance = { factor = 1 }
		event_target:gushuokguan_migration_target = {
			random_list = {
				9 = {} #Empty
				1 = {
					random_list = {
						1 = {
							trigger = { has_harimari_minority_trigger = yes }
							remove_harimari_minority_size_effect = yes
						}
						1 = {
							trigger = { has_human_minority_trigger = yes }
							remove_human_minority_size_effect = yes
						}
						1 = {
							trigger = { has_kobold_minority_trigger = yes }
							remove_kobold_minority_size_effect = yes
						}
						1 = {
							trigger = { has_elven_minority_trigger = yes }
							remove_elven_minority_size_effect = yes
						}
					}
				}
			}
			custom_tooltip = feitenEmpty
			random_list = {
				4 = {} #Empty
				1 = { add_random_development = -1 }
			}
			custom_tooltip = feitenEmpty
			random_list = {
				1 = {} #Empty 
				1 = { add_devastation = 10 }
			}
		}
	}
}

#Migrants Clash with Locals
country_event = {
	id = gushuokguan_event.13
	title = gushuokguan_event.13.t
	desc = gushuokguan_event.13.d
	picture = CHINESE_GENERAL_eventPicture
	
	
	is_triggered_only = yes

	trigger = { }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = gushuokguan_migration_target
			}
		}
	}

	option = {
		name = gushuokguan_event.13.a
		ai_chance = { factor = 1 }
		event_target:gushuokguan_migration_target = {
			random_list = {
				4 = {} #Empty
				1 = { add_random_development = -1 }
			}
			random_list = {
				1 = {} #Empty 
				1 = { add_devastation = 10 }
			}
		}
	}
}

#Migrants Thrive
country_event = {
	id = gushuokguan_event.14
	title = gushuokguan_event.14.t
	desc = gushuokguan_event.14.d
	picture = CHINESE_GENERAL_eventPicture
	
	
	is_triggered_only = yes

	trigger = { }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = gushuokguan_migration_target
			}
		}
	}
	
	option = {
		name = gushuokguan_event.14.a
		ai_chance = { factor = 1 }
		event_target:gushuokguan_migration_target = {
			add_random_development = 2
			random_list = {
				90 = {} #Empty
				10 = {
					random_list = {
						1 = {
							trigger = { has_harimari_majority_trigger = no }
							add_harimari_minority_size_effect = yes
						}
						1 = {
							trigger = { has_human_majority_trigger = no }
							add_human_minority_size_effect = yes
						}
						1 = {
							add_kobold_minority_size_effect = yes
						}
						1 = {
							add_elven_minority_size_effect = yes
						}
					}
				}
			}
		}
	}
}

#Stronger Together
country_event = {
	id = gushuokguan_event.15
	title = gushuokguan_event.15.t
	desc = gushuokguan_event.15.d
	picture = CHINESE_GENERAL_eventPicture
	
	
	is_triggered_only = yes

	trigger = { }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = gushuokguan_migration_target
			}
		}
	}
	
	option = {
		name = gushuokguan_event.14.a
		ai_chance = { factor = 1 }
		event_target:gushuokguan_migration_target = {
			add_province_modifier = {
				name = gushuokguan_stronger_together
				duration = 7300
			}
		}
	}
}

#Migratory Mercenaries
country_event = {
	id = gushuokguan_event.16
	title = gushuokguan_event.16.t
	desc = gushuokguan_event.16.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.16.a
		ai_chance = { factor = 1 }
		add_yearly_manpower = 0.5
	}
}

#Seven Swords Society
country_event = {
	id = gushuokguan_event.17
	title = gushuokguan_event.17.t
	desc = gushuokguan_event.17.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.17.a
		ai_chance = { factor = 1 }
		add_country_modifier = {
			name = gushuokguan_seven_swords_society
			duration = -1
		}
		hidden_effect = {
			country_event = { id = gushuokguan_event.18 days = 3650 random = 3650 }
		} 
	}
}

#The Jade Pub Incident
country_event = {
	id = gushuokguan_event.18
	title = gushuokguan_event.18.t
	desc = gushuokguan_event.18.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	after = {
		hidden_effect = {
			set_country_flag = gushuokguan_jade_pub_incident
		}
	}

	option = {
		name = gushuokguan_event.18.a
		ai_chance = { factor = 1 }
		define_advisor = {
			type = army_reformer
			name = "Lubei 'the Honorable'"
			skill = 2
			discount = yes
		}
	}

	option = {
		name = gushuokguan_event.18.a
		ai_chance = { factor = 1 }
		define_general = {
			shock = 5
			fire = 4
			manuever = 2
			siege = 2
			name = "Lubei 'the Honorable'"
		}
	}
}

#Code of Lubei
country_event = {
	id = gushuokguan_event.19
	title = gushuokguan_event.19.t
	desc = gushuokguan_event.19.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.19.a
		ai_chance = { factor = 1 }
		if = {
			limit = { employed_advisor = { name = "Lubei 'the Honorable'" } }
			add_country_modifier = {
				name = gushuokguan_advisor_lubei
				duration = 9125
			}
		}
		if = {
			limit = { has_leader = "Lubei 'the Honorable'" }
			add_country_modifier = {
				name = gushuokguan_general_lubei
				duration = 9125
			}
		}
		add_country_modifier = {
			name = gushuokguan_the_code_of_lubei
			duration = -1
		}
		add_country_modifier = {
			name = gushuokguan_the_code_of_lubei_morale
			duration = -1
		}
	}
}

#Flag clear
country_event = {
	id = gushuokguan_event.21
	title = gushuokguan_event.51.t
	desc = gushuokguan_event.51.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes
	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		} #Gushuokguan
		has_country_flag = gushuokguan_enable_migration_events
	}

	hidden = yes

	option = {
		name = gushuokguan_event.51.a
		ai_chance = { factor = 1 }
		clr_country_flag = gushuokguan_enable_migration_events
	}
}

### United We Stand Mission Chain ###
#On The Matter of Governance
country_event = {
	id = gushuokguan_event.31
	title = gushuokguan_event.31.t
	desc = gushuokguan_event.31.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.31.a
		ai_chance = { factor = 1 }
		add_republican_tradition = -10
		add_country_modifier = {
			name = gushuokguan_political_unrest
			duration = 850
		}
		hidden_effect = { country_event = { id = gushuokguan_event.32 days = 730 } }
	}
}

#Bad Forecast
country_event = {
	id = gushuokguan_event.32
	title = gushuokguan_event.32.t
	desc = gushuokguan_event.32.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.32.a
		ai_chance = { factor = 1 }
		extend_country_modifier = {
			name = gushuokguan_political_unrest
			duration = 360
		}
		country_event = { id = gushuokguan_event.33 days = 120 }
	}
}

#A Storm Is Brewing
country_event = {
	id = gushuokguan_event.33
	title = gushuokguan_event.33.t
	desc = gushuokguan_event.33.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.33.a
		ai_chance = { factor = 1 }
		remove_country_modifier = gushuokguan_political_unrest
		add_country_modifier = {
			name = gushuokguan_political_unrest_2
			duration = 180
		}
		country_event = { id = gushuokguan_event.34 days = 60 }
	}
}

#Calm Before
country_event = {
	id = gushuokguan_event.34
	title = gushuokguan_event.34.t
	desc = gushuokguan_event.34.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.34.a
		ai_chance = { factor = 1 }
		remove_country_modifier = gushuokguan_political_unrest_2
		add_country_modifier = {
			name = gushuokguan_political_unrest_3
			duration = 120
		}
		country_event = { id = gushuokguan_event.35 days = 7 }
	}
}

#A Choice
country_event = {
	id = gushuokguan_event.35
	title = gushuokguan_event.35.t
	desc = gushuokguan_event.35.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	option = {
		name = gushuokguan_event.35.a
		ai_chance = { factor = 1 }
		custom_tooltip = gushuokguan_choose_inked_shields_tt
		hidden_effect = {
			set_country_flag = gushuokguan_chosen_inked_shields
		}
		country_event = { id = gushuokguan_event.36 } #The Storm Arrives - You Chose Inked Shields
	}

	option = {
		name = gushuokguan_event.35.b
		ai_chance = { factor = 1 }
		custom_tooltip = gushuokguan_choose_red_scarfs_tt
		hidden_effect = {
			set_country_flag = gushuokguan_chosen_red_scarfs
		}
		country_event = { id = gushuokguan_event.37 } #The Storm Arrives - You Chose Red Scarfs
	}
}

#The Storm Arrives - You Chose Inked Shields
country_event = {
	id = gushuokguan_event.36
	title = gushuokguan_event.36.t
	desc = gushuokguan_event.36.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = { #Version - Player is Inked Shield
		hidden_effect = {
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_global_event_target_as = red_scarf_1
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:red_scarf_1 } }
				save_global_event_target_as = inked_shield_1
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:red_scarf_1 } NOT = { tag = event_target:inked_shield_1 } }
				save_global_event_target_as = red_scarf_2
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:red_scarf_1 } NOT = { tag = event_target:inked_shield_1 } NOT = { tag = event_target:red_scarf_2 } }
				save_global_event_target_as = inked_shield_2
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:red_scarf_1 } NOT = { tag = event_target:inked_shield_1 } NOT = { tag = event_target:red_scarf_2 } NOT = { tag = event_target:inked_shield_2 } }
				save_global_event_target_as = red_scarf_3
			}
		}
	}

	option = {
		name = gushuokguan_event.36.a
		ai_chance = { factor = 1 }
		custom_tooltip = gushuokguan_civil_war_tt
		hidden_effect = {
			event_target:red_scarf_1 = { grant_independence = yes }
			event_target:red_scarf_2 = { grant_independence = yes } 
			event_target:red_scarf_3 = { grant_independence = yes }
			event_target:red_scarf_3 = {
				create_alliance = event_target:red_scarf_1
			}
			event_target:red_scarf_2 = {
				create_alliance = event_target:red_scarf_1
			}
			event_target:red_scarf_1 = {
				declare_war_with_cb = {
					who = ROOT #Gushuokguan
					casus_belli = cb_independence_war
				}
			}
			event_target:red_scarf_2 = { join_all_offensive_wars_of = event_target:red_scarf_1 }
			event_target:red_scarf_3 = { join_all_offensive_wars_of = event_target:red_scarf_1 }
		}
	}
}

#The Storm Arrives - You Chose Red Scarfs
country_event = {
	id = gushuokguan_event.37
	title = gushuokguan_event.37.t
	desc = gushuokguan_event.37.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = { #Version - Player is Red Scarf
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_global_event_target_as = inked_shield_1
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:inked_shield_1 } }
				save_global_event_target_as = red_scarf_1
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:inked_shield_1 } NOT = { tag = event_target:red_scarf_1 } }
				save_global_event_target_as = inked_shield_2
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:inked_shield_1 } NOT = { tag = event_target:red_scarf_1 } NOT = { tag = event_target:inked_shield_2 } }
				save_global_event_target_as = red_scarf_2
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:inked_shield_1 } NOT = { tag = event_target:red_scarf_1 } NOT = { tag = event_target:inked_shield_2 } NOT = { tag = event_target:red_scarf_2 } }
				save_global_event_target_as = inked_shield_3
			}
		}
	}

	option = {
		name = gushuokguan_event.37.a
		ai_chance = { factor = 1 }
		custom_tooltip = gushuokguan_civil_war_tt
		hidden_effect = {
			event_target:inked_shield_1 = { grant_independence = yes }
			event_target:inked_shield_2 = { grant_independence = yes } 
			event_target:inked_shield_3 = { grant_independence = yes } 
			event_target:inked_shield_3 = {
				create_alliance = event_target:inked_shield_1
			}
			event_target:inked_shield_2 = {
				create_alliance = event_target:inked_shield_1
			}
			event_target:inked_shield_1 = {
				declare_war_with_cb = {
					who = ROOT #Gushuokguan
					casus_belli = cb_independence_war
				}
			}
			event_target:inked_shield_2 = { join_all_offensive_wars_of = event_target:inked_shield_1 }
			event_target:inked_shield_3 = { join_all_offensive_wars_of = event_target:inked_shield_1 }
		}
	}
}

#Inked Shields Win
country_event = {
	id = gushuokguan_event.38
	title = gushuokguan_event.38.t
	desc = gushuokguan_event.38.d
	picture = CHINESE_GENERAL_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		}
		has_country_flag = gushuokguan_chosen_inked_shields
		NOT = { war_with = event_target:red_scarf_1 }
	}

	after = {
		clear_global_event_target = inked_shield_1
		clear_global_event_target = inked_shield_2
		clear_global_event_target = inked_shield_3
		clear_global_event_target = red_scarf_1
		clear_global_event_target = red_scarf_2
		clear_global_event_target = red_scarf_3
		clr_country_flag = gushuokguan_chosen_inked_shields
	}

	option = {
		name = gushuokguan_event.38.a
		ai_chance = { factor = 1 }
		hidden_effect = { set_country_flag = gushuokguan_civil_war_confederalist_won }
		create_subject = {
			subject_type = dao 
			subject = event_target:red_scarf_1
		}
		create_subject = {
			subject_type = dao 
			subject = event_target:red_scarf_2
		}
		create_subject = {
			subject_type = dao 
			subject = event_target:red_scarf_3
		}
	}
}

#Red Scarfs Win
country_event = {
	id = gushuokguan_event.39
	title = gushuokguan_event.39.t
	desc = gushuokguan_event.39.d
	picture = CHINESE_GENERAL_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		} #Gushuokguan
		has_country_flag = gushuokguan_chosen_red_scarfs
		NOT = { war_with = event_target:inked_shield_1 }
	}

	after = {
		clear_global_event_target = inked_shield_1
		clear_global_event_target = inked_shield_2
		clear_global_event_target = inked_shield_3
		clear_global_event_target = red_scarf_1
		clear_global_event_target = red_scarf_2
		clear_global_event_target = red_scarf_3
		clr_country_flag = gushuokguan_chosen_red_scarfs

	}

	option = {
		name = gushuokguan_event.39.a
		ai_chance = { factor = 1 }
		hidden_effect = { set_country_flag = gushuokguan_civil_war_federalist_won }
		create_subject = {
			subject_type = dao 
			subject = event_target:inked_shield_1
		}
		create_subject = {
			subject_type = dao 
			subject = event_target:inked_shield_2
		}
		create_subject = {
			subject_type = dao 
			subject = event_target:inked_shield_3
		}
	}
}

### Confederal Council Events ###
#Event Manager
country_event = {
	id = gushuokguan_event.50
	title = gushuokguan_event.51.t
	desc = gushuokguan_event.51.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes
	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		}
		has_country_flag = gushuokguan_enable_confederal_council
	}

	hidden = yes

	option = {
		name = gushuokguan_event.51.a
		ai_chance = { factor = 1 }
		random_list = {
			4 = {} #Empty
			1 = { 
				trigger = {
					calc_true_if = {
						all_subject_country = {
							is_subject_of_type = dao
						}
						amount = 4
					}
					any_subject_country = {
						any_neighbor_country = {
							NOT = { 
								is_subject_of = ROOT #Gushuokguan
								tag = ROOT #Gushuokguan
							}
						}
					}
				}
				country_event = { id = gushuokguan_event.51 } }
			1 = { country_event = { id = gushuokguan_event.52 } }
			1 = { country_event = { id = gushuokguan_event.53 } }
			1 = { 
				trigger = {
					calc_true_if = {
						all_subject_country = {
							is_subject_of_type = dao
						}
						amount = 4
					}
				}
				country_event = { id = gushuokguan_event.54 } }
			1 = { 
				trigger = {
					calc_true_if = {
						all_subject_country = {
							is_subject_of_type = dao
						}
						amount = 4
					}
				}
				country_event = { id = gushuokguan_event.55 } }
			1 = { country_event = { id = gushuokguan_event.56 } }
			1 = { country_event = { id = gushuokguan_event.57 } }
			1 = { country_event = { id = gushuokguan_event.58 } }
			1 = { 
				trigger = {
					any_subject_country = {
						is_subject_of_type = dao
						OR = {
							is_not_purging_any_race_trigger = no
							is_not_expelling_any_race_trigger = no
						}
					}
				}
				country_event = { id = gushuokguan_event.59 } }
		}
	}
}

#Declaration of Hostilities
country_event = {
	id = gushuokguan_event.51
	title = gushuokguan_event.51.t
	desc = gushuokguan_event.51.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { 
					is_subject_of_type = dao 
					any_neighbor_country = {
						NOT = { 
							is_subject_of = ROOT #Gushuokguan
							tag = ROOT #Gushuokguan
						} 
					}
				}
				save_global_event_target_as = dao_A_gl
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A_gl } }
				save_event_target_as = dao_B
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A_gl } NOT = { tag = event_target:dao_B } }
				save_event_target_as = dao_C
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A_gl } NOT = { tag = event_target:dao_B } NOT = { tag = event_target:dao_C } }
				save_global_event_target_as = dao_D_gl
			}
		}
	}

	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.51.a
		ai_chance = { factor = 1 }
		event_target:dao_B = { 
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10  }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_small
			}
		}
		event_target:dao_C = { 
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_small
			}
		}
		event_target:dao_A = {
			random_neighbor_country = {
				limit = {
					NOT = { 
						is_subject_of = ROOT #Gushuokguan
						tag = ROOT #Gushuokguan
					} 
				}
				every_owned_province = {
					limit = { is_neighbor_of = event_target:dao_A }
					add_claim = ROOT
					set_province_flag = gushuokguan_claimed_for_dao
				}
			}
		}
		set_country_flag = gushuokguan_dao_claim
	}

	option = {
		name = gushuokguan_event.51.b
		ai_chance = { factor = 1 }
		event_target:dao_A = { 
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 1
			}
			else = { add_liberty_desire = 10 }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_small
			}
		}
		event_target:dao_D = { 
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 1
			}
			else = { add_liberty_desire = 10 }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_small
			}
		}
		add_ruler_modifier = {
			name = gushuokguan_prosperity_devastation
			duration = -1
		}
		every_subject_country = {
			add_ruler_modifier = {
				name = gushuokguan_prosperity_devastation
				duration = -1
			}
		}
	}
}

#Disagreement over Trade Rulers
country_event = {
	id = gushuokguan_event.52
	title = gushuokguan_event.52.t
	desc = gushuokguan_event.52.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_event_target_as = dao_A
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } }
				save_event_target_as = dao_B
			}
		}
	}

	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.52.a
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_prestige = 15
			add_country_modifier = {
				name = gushuokguan_victory_in_the_council
				duration = 1460
			}
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
		event_target:dao_B = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
	}

	option = {
		name = gushuokguan_event.52.b
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		event_target:dao_B = {
			add_prestige = 15
			add_country_modifier = {
				name = gushuokguan_victory_in_the_council
				duration = 1460
			}
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
	}
}

#Restoration Funds
country_event = {
	id = gushuokguan_event.53
	title = gushuokguan_event.53.t
	desc = gushuokguan_event.53.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_event_target_as = dao_A
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } }
				save_event_target_as = dao_B
			}
		}
	}

	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.53.a
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_adm_power = 50
			add_years_of_income = 0.2
			add_liberty_desire = -10
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
			add_country_modifier = {
				name = gushuokguan_devastation
				duration = 1460
			}
		}
		event_target:dao_B = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
		}
	}

	option = {
		name = gushuokguan_event.53.b
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
		}
		event_target:dao_B = {
			add_adm_power = 50
			add_years_of_income = 0.2
			add_liberty_desire = -10
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
			add_country_modifier = {
				name = gushuokguan_devastation
				duration = 1460
			}
		}
	}

	option = {
		name = gushuokguan_event.53.c
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_adm_power = 25
			add_years_of_income = 0.1
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_small
			}
			add_country_modifier = {
				name = gushuokguan_devastation
				duration = 1460
			}
		}
		event_target:dao_B = {
			add_adm_power = 25
			add_years_of_income = 0.1
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_small
			}
			add_country_modifier = {
				name = gushuokguan_devastation
				duration = 1460
			}
		}
	}
}

#Spoils of War
country_event = {
	id = gushuokguan_event.54
	title = gushuokguan_event.54.t
	desc = gushuokguan_event.54.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_event_target_as = dao_A
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } }
				save_event_target_as = dao_B
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } NOT = { tag = event_target:dao_B } }
				save_event_target_as = dao_C
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } NOT = { tag = event_target:dao_B } NOT = { tag = event_target:dao_C } }
				save_event_target_as = dao_D
			}
		}
	}
	
	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.54.a
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_years_of_income = 0.5
			add_prestige = 10
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
		event_target:dao_C = {
			add_years_of_income = 0.5
			add_prestige = 10
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
		event_target:dao_B = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		event_target:dao_D = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
	}

	option = {
		name = gushuokguan_event.54.b
		ai_chance = { factor = 1 }
		event_target:dao_B = {
			add_years_of_income = 0.5
			add_prestige = 10
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
		event_target:dao_D = {
			add_years_of_income = 0.5
			add_prestige = 10
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
		event_target:dao_A = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		event_target:dao_C = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
	}

	option = {
		name = gushuokguan_event.54.c
		ai_chance = { factor = 1 }
		
		add_years_of_income = 1

		event_target:dao_A = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
		}
		event_target:dao_C = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
		}
		event_target:dao_B = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
		}
		event_target:dao_D = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
		}
	}
}

#Restoration vs Military
country_event = {
	id = gushuokguan_event.55
	title = gushuokguan_event.55.t
	desc = gushuokguan_event.55.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_event_target_as = dao_A
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } }
				save_event_target_as = dao_B
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } NOT = { tag = event_target:dao_B } }
				save_event_target_as = dao_C
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } NOT = { tag = event_target:dao_B } NOT = { tag = event_target:dao_C } }
				save_event_target_as = dao_D
			}
		}
	}
	
	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.55.a
		ai_chance = { factor = 1 }
		every_subject_country = {
			add_country_modifier = {
				name = gushuokguan_devastation
				duration = 1460
			}
			every_owned_province = {
				add_prosperity = 10
			}
		}
		event_target:dao_A = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		event_target:dao_B = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
	}

	option = {
		name = gushuokguan_event.55.b
		ai_chance = { factor = 1 }
		every_subject_country = {
			add_country_modifier = {
				name = gushuokguan_military_focus
				duration = 1460
			}
		}
		event_target:dao_C = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		event_target:dao_D = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
	}
}

#Trade Benefits
country_event = {
	id = gushuokguan_event.56
	title = gushuokguan_event.56.t
	desc = gushuokguan_event.56.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { 
					is_subject_of_type = dao 
					num_of_ports = 1
				}
				save_event_target_as = coastal_dao
			}
		}
	}
	
	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.56.a
		ai_chance = { factor = 1 }
		event_target:coastal_dao = {
			add_country_modifier = {
				name = gushuokguan_trade_benefits
				duration = 1460
			}
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
	}

	option = {
		name = gushuokguan_event.56.b
		ai_chance = { factor = 1 }
		event_target:coastal_dao = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		every_subject_country = {
			limit = { is_subject_of_type = dao }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
	}
}

#Support for Caravans
country_event = {
	id = gushuokguan_event.57
	title = gushuokguan_event.57.t
	desc = gushuokguan_event.57.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { 
					is_subject_of_type = dao 
					NOT = { num_of_ports = 1 }
				}
				save_event_target_as = interior_dao
			}
		}
	}
	
	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.57.a
		ai_chance = { factor = 1 }
		event_target:interior_dao = {
			add_country_modifier = {
				name = gushuokguan_caravan_benefits
				duration = 1460
			}
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
	}

	option = {
		name = gushuokguan_event.57.b
		ai_chance = { factor = 1 }
		event_target:interior_dao = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 5
			}
			else = { add_liberty_desire = 10 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		every_subject_country = {
			limit = { is_subject_of_type = dao }
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
	}
}

#Anti-centralisation
country_event = {
	id = gushuokguan_event.58
	title = gushuokguan_event.58.t
	desc = gushuokguan_event.58.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { is_subject_of_type = dao }
				save_event_target_as = dao_A
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } }
				save_event_target_as = dao_B
			}
		}
	}
	
	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.58.a
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_country_modifier = {
				name = gushuokguan_decentralisation_focus
				duration = 1460
			}
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 12
			}
			else = { add_liberty_desire = 25 }
			
		}
		event_target:dao_B = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_large
			}
			add_liberty_desire = -20
		}
	}

	option = {
		name = gushuokguan_event.58.b
		ai_chance = { factor = 1 }
		event_target:dao_B = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 12
			}
			else = { add_liberty_desire = 25 }
			
		}
		event_target:dao_A = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_large
			}
			add_liberty_desire = -20
		}
	}
}

#Anti-oppression
country_event = {
	id = gushuokguan_event.59
	title = gushuokguan_event.59.t
	desc = gushuokguan_event.59.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { 
					is_subject_of_type = dao 
					OR = {
						is_not_purging_any_race_trigger = no
						is_not_expelling_any_race_trigger = no
					}
				}
				save_event_target_as = dao_A
			}
			random_subject_country = {
				limit = { is_subject_of_type = dao NOT = { tag = event_target:dao_A } }
				save_event_target_as = dao_B
			}
		}
	}
	
	after = {
		hidden_effect = {
			change_variable = {
				which = gushuokguan_event_counter
				value = 1
			}
		}
	}

	option = {
		name = gushuokguan_event.59.a
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 10
			}
			else = { add_liberty_desire = 20 }
			
			end_all_purge = yes
			end_all_expel = yes
		}
		event_target:dao_B = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_large
			}
			add_liberty_desire = -15
		}
	}

	option = {
		name = gushuokguan_event.59.b
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_large
			}
			add_liberty_desire = -15
		}
		event_target:dao_B = {
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_large
			}
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 10
			}
			else = { add_liberty_desire = 20 }
			
		}
	}
}

#You didn't decc
country_event = {
	id = gushuokguan_event.61
	title = gushuokguan_event.61.t
	desc = gushuokguan_event.61.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		} #Gushuokguan
		#has_country_flag = gushuokguan_enable_confederal_council #This one may be redundant tbh
		has_country_flag = gushuokguan_dao_claim
		any_claimed_province = {
			has_province_flag = gushuokguan_claimed_for_dao
			owner = { 
				NOT = { truce_with = ROOT }
				NOT = { war_with = ROOT } 
			}
			NOT = { owned_by = ROOT }
		}
	}

	after = {
		hidden_effect = {
			clear_global_event_target = dao_A_gl
			clear_global_event_target = dao_D_gl
			every_claimed_province = {
				limit = { has_province_flag = gushuokguan_claimed_for_dao }
				clr_province_flag = gushuokguan_claimed_for_dao
			}
		}
	}

	option = {
		name = gushuokguan_event.61.a
		ai_chance = { factor = 1 }
		event_target:dao_A_gl = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
		event_target:dao_D_gl = {
			if = {
				limit = { ROOT = { has_country_flag = gushuokguan_dao_diplomatic_relations } } #Gushuokguan
				add_liberty_desire = 7
			}
			else = { add_liberty_desire = 15 }
			
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_negative_medium
			}
		}
	}
}

#You decc
country_event = {
	id = gushuokguan_event.62
	title = gushuokguan_event.62.t
	desc = gushuokguan_event.62.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = {
		has_country_flag = gushuokguan_dao_claim
		any_claimed_province = {
			has_province_flag = gushuokguan_claimed_for_dao
			owner = { 
				NOT = { truce_with = ROOT }
				NOT = { war_with = ROOT } 
			}
			NOT = { owned_by = ROOT }
		}
		has_country_flag = gushuokguan_enable_confederal_council
	}

	after = {
		hidden_effect = {
			clear_global_event_target = dao_A_gl
			clear_global_event_target = dao_D_gl
			every_claimed_province = {
				limit = { has_province_flag = gushuokguan_claimed_for_dao }
				clr_province_flag = gushuokguan_claimed_for_dao
			}
		}
	}

	option = {
		name = gushuokguan_event.62.a
		ai_chance = { factor = 1 }
		event_target:dao_A = {
			add_liberty_desire = -10
			add_prestige = 20
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
		event_target:dao_D = {
			add_liberty_desire = -10
			add_prestige = 20
			add_opinion = {
				who = PREV #Gushuokguan
				modifier = gushuokguan_council_tensions_positive_medium
			}
		}
	}
}

#Release Dao
country_event = {
	id = gushuokguan_event.71
	title = gushuokguan_event.71.t
	desc = gushuokguan_event.71.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes

	trigger = { }
	
	option = {
		name = gushuokguan_event.71.a
		ai_chance = { factor = 1 }
		trigger = { has_country_flag = gushuokguan_can_release_guwaamud }
		if = {
			limit = {
				OR = {
					NOT = { exists = Y96 } #Guwaamud
					Y96 = { is_subject_of = ROOT } #Guwaamud #Gushuokguan
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					region = shuvuushudi_region
					value = 15 #15/30
				}
			}
			custom_tooltip = gushuokguan_release_guwaamud_tt
			hidden_effect = { 
				every_owned_province = {
					limit = {
						region = shuvuushudi_region
					}
					cede_province = Y96 #Guwaamud
					add_core = Y96 #Guwaamud
				}
				clr_country_flag = gushuokguan_can_release_guwaamud
			} 
			create_subject = {
				subject_type = dao
				subject = Y96 #Guwaamud
			}
		}
		else = {
			custom_tooltip = gushuokguan_explain_release_guwaamud_tt
		}
	}

	option = {
		name = gushuokguan_event.71.b
		ai_chance = { factor = 1 }
		trigger = { has_country_flag = gushuokguan_can_release_hubao }
		if = {
			limit = {
				OR = {
					NOT = { exists = Y03 } #Guwaamud
					Y03 = { is_subject_of = ROOT } #Guwaamud #Gushuokguan
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					OR = {
						area = moryokang_area
						area = jinqiu_area
						area = jiangszun_area
						area = bianfang_area
						area = bianyuan_area
					}
					value = 10 #10/19
				}
			}
			custom_tooltip = gushuokguan_release_hubao_tt
			hidden_effect = { 
				clr_country_flag = gushuokguan_can_release_hubao
				every_owned_province = {
					limit = {
						OR = {
							area = moryokang_area
							area = jinqiu_area
							area = jiangszun_area
							area = bianfang_area
							area = bianyuan_area
						}
					}
					cede_province = Y03 #Hubao
					add_core = Y03 #Hubao
				}
			} 
			create_subject = {
				subject_type = dao
				subject = Y03 #Hubao
			}
		}
		else = {
			custom_tooltip = gushuokguan_explain_release_hubao_tt
		}
	}

	option = {
		name = gushuokguan_event.71.c
		ai_chance = { factor = 1 }
		trigger = { has_country_flag = gushuokguan_can_release_zyujyut }
		if = {
			limit = {
				OR = {
					NOT = { exists = Y23 } #Guwaamud
					Y23 = { is_subject_of = ROOT } #Guwaamud #Gushuokguan
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					OR = {
						area = hungngon_area
						area = wanglam_area
						area = jyutsai_area
						area = lamzung_area
					}
					value = 8 #8/15
				}
			}
			custom_tooltip = gushuokguan_release_zyujyut_tt
			hidden_effect = { 
				every_owned_province = {
					limit = {
						OR = {
							area = hungngon_area
							area = wanglam_area
							area = jyutsai_area
							area = lamzung_area
						}
					}
					cede_province = Y23 #Zyujyut
					add_core = Y23 #Zyujyut
				}
				clr_country_flag = gushuokguan_can_release_zyujyut
			} 
			create_subject = {
				subject_type = dao
				subject = Y23 #Zyujyut
			}
		}
		else = {
			custom_tooltip = gushuokguan_explain_release_zyujyut_tt
		}
	}

	option = {
		name = gushuokguan_event.71.d1
		ai_chance = { factor = 1 }
		trigger = { has_country_flag = gushuokguan_can_release_one_xia }
		if = {
			limit = {
				OR = {
					NOT = { exists = Y99 } #Guwaamud
					Y99 = { is_subject_of = ROOT } #Guwaamud #Gushuokguan
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					region = xianjie_region
					value = 35 #35/43
				}
			}
			custom_tooltip = gushuokguan_release_one_xia_tt
			hidden_effect = { 
				every_owned_province = {
					limit = {
						region = xianjie_region
					}
					cede_province = Y99 #One Xia
					add_core = Y99 #One Xia
				}
				clr_country_flag = gushuokguan_can_release_one_xia
			} 
			create_subject = {
				subject_type = dao
				subject = Y99 #One Xia
			}
		}
		else = {
			custom_tooltip = gushuokguan_explain_release_one_xia_tt
		}
	}
	
	option = {
		name = gushuokguan_event.71.e
		ai_chance = { factor = 1 }
		#Leave the menu
	}
}

###Condottieri Sold Counter
country_event = {
	id = gushuokguan_event.101
	title = gushuokguan_event.101.t
	desc = gushuokguan_event.101.d
	picture = CHINESE_GENERAL_eventPicture
	
	is_triggered_only = yes
	hidden = yes 

	trigger = {
		OR = {
			tag = Y17 #Gushuokguan
			was_tag = Y17 #Gushuokguan
		}
		ai = no
	}
	
	option = {
		name = gushuokguan_event.101.a
		ai_chance = { factor = 1 }
		every_known_country = {
			#Strip Modifier
			if = {
				limit = {
					NOT = { is_hiring_condottiere_from = ROOT } #Gushuokguan
					has_country_flag = gushuokguan_already_checked_condottieri
				}
				clr_country_flag = gushuokguan_already_checked_condottieri
			}
			#Apply Modifier
			if = {
				limit = {
					is_hiring_condottiere_from = ROOT #Gushuokguan
					NOT = { has_country_flag = gushuokguan_already_checked_condottieri }
				}
				set_country_flag = gushuokguan_already_checked_condottieri
				ROOT = {
					change_variable = {
						which = gushuokguan_rented_condottieri_counter
						value = 1
					}
				}
			}
		}
	}
}